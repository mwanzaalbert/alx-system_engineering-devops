#!/usr/bin/env bash
# Fix nginx listening port

# Update package list and install Nginx if it's not already installed
sudo apt update
sudo apt install -y nginx

# Ensure Nginx is started and enabled to start at boot
sudo service nginx start

# Check if Nginx is listening on port 80 and configure it if necessary
sed -i 's/listen 8080/listen 80/g' /etc/nginx/sites-enabled/default
sed -i 's/listen \[::\]:8080/listen \[::\]:80/g' /etc/nginx/sites-enabled/default
pgrep nginx -o > /run/nginx.pid
nginx -s reload
echo '' > /run/nginx.pid
